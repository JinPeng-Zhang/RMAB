# 论文

## 摘要

## 背景(第一章)

交代问题，研究现状

https://zhuanlan.zhihu.com/p/614689779

### 1.1

在交换机端口队列调度问题上已经进行了很多年的研究，目的是实现将交换机出口队列的调度资源合理的分配给需要转发出去的流，为多个聚合流提供一定的带宽、时延保证，甚至是与丢包有关的性能。目前，针对该问题已经提出了大量的交换机出口队列调度方案。例如优先级调度、加权轮询调度、DWRR、混合调度等多种调度方法；其中，优先级调度以其原理简单、容易实现、十分利于时间敏感应用等特性被广泛应用到各种交换机端口中。但是，优先级调度也有很严重的缺点，例如容易造成低优先级饥饿和网络抖动，往往容易造成低优先级队列无法获得足够的带宽资源，造成队列性能的严重下降。



对此虽然已经有一些新的机制和算法的提出来解决该问题，但也只是在假设的特定场景下有良好的表现性能；当网络场景发生切换时，这些机制并不能够主动去适应，性能会急剧下降。随着网络设备与模式的发展，对一种能够自适应流量、网络场景变换的交换机出端口队列调度算法有着更急迫的需求，它可以在网络稳定的时候维持原有的优先级调度方式，当网络场景切换或者流量突发的时候进行控制,能够缓解甚至避免饥饿现象的出现。

### 1.2

SP调度算法是目前交换机使用最广泛的调度算法,因此我们希望设计处一种适应流量、网络场景变换的交换机出端口队列调度算法,既能够保留一定的SP特性的同时,又能够解决其自身存在的缺点.

基于学习的设计有很大的潜力使用多种条件和情况，不需要为了满足条件从而进行复杂耗时的手动配置或修改。因此，基于学习的自适应端口队列调度可以潜在的避免手动设计、调整调度方案的过程。例如，华为使用ACC学习算法自动调整交换机ECN协议的三个默认参数，省去了工程师数月的手动调参的时间，在极大的减少成本的同时提高了网络性能。在此成功的案例下激发了我们使用学习的方式去设计新的调度算法。综合分析，我们确定了使用学习算法进行队列调度需要实现的最终目标。

1-缓解饥饿问题：当网络聚合流量突发，汇聚到一个端口时，我们希望根据学习到的模式或数据，能过够进行合理调度，保证原本应该饿死的队列获取一定的带宽，这可能有悖与流之间优先级，但是能够缓解饥饿问题导致的严重后果。

2-优先级问题：当网络状态稳定时，即使用SP调度算法能够保障各队列有序公平发送；基于学习的调度算法应该不做干预，即此时基于学习的调度算法应该和严格优先级一样，保证高优先级先发送，低优先级后发送，确保关键业务被优先发送。

3-开销：由于端口调度以很高的频率进行运行，使用算法进行学习有需要消耗很高的CPU资源，因此需要控制合适执行频率以避免较高的CPU开销。

基于此背景,网络环境对于一种能够自动适应的调度算法有着

### 1.3关键设计和贡献

以学习为基础的方法：

在交换机端口处，我们能够采集经过该端口所有流的响应信息，例如流的大小，发送速率.

为什么是RMAB问题：

我们将每个端口的多个队列看作多个服务器，每个服务器服务不同优先级类型的流，而我们的端口调度则是选择在每一个规定的时刻选择一个队列发送一定数量的数据包，即MAB问题中的“摇”一个老虎机，从而获得最大的收益。之所以能够从MAB问题认定为RMAB关键点是，在每一时刻，对于任何一个队列，调度的动作只有两种，也就是发送和不发送。我们通过定义不同的收益来促使调度方法进行调整

Contributions: Our key contributions in this paper are:

- 展示了当前全新的基于学习的队列调度算法，并根据问题特殊性判定其为RMAB问题，使用WITTLE INDEX的方法进行解决
- 我们开发了一种新的分布式框架来设计和计算新的基于学习的调度方案
- 我们使用python代码进行仿真，并在ovs上部署验证，我们的设计表明，该方法解决了目标问题。

## 方案(第二章)

提出解决方法，介绍WITTLE INDEX

将问题建模为RMAB问题,对多个指标进行归一并加权作为调度的性能收益,端口的每一个调度队列看作一个"老虎机".目的是使调度算法获得长期收益的最大值.为此,引入最小调度时间单元MSTU,每一个MSTU内,算法决定调度队列和对应发送数据量的大小.

目前,WITTLE INDEX方法已被证明完全解决RMAB问题,

why RMAB?

根据资源分配的想法思路,我们认为单位时间交换机端口调度的资源是有限的,调度算法就可以看作一种动态的分配方式.在每一个时隙,调度算法将端口的调度资源分配到多个队列上.当我们以一种量化的方式对端口的性能(例如丢包率\平均队列长度)作为调度算法的收益时.通过修改调度策略来获得最大收益就演变成一种RMAB问题.从本质上这是一类简化的强化学习问题.

why WITTLE INDEX?

论文[]在WITTLE INDEX方法解决RMAB问题上已经实现了严格的理论证明,这是决定本论文使用wittle index设计队列调度算法.

WITTLE INDEX原理

WITTLE INDEX优点

WITTLE INDEX缺点

why not DRL?

## 建模(第三章)

ppt

## 仿真(第四/五章)

PYTHON 

OVS

## 结果分析(第六章)

## 总结